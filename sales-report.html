<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Sales Report â€” SnapEats</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/css/styles.css" rel="stylesheet">
</head>
<body>
  <nav class="navbar navbar-expand-lg px-4">
    <a class="navbar-brand" href="index.html">SnapEats</a>
  </nav>

  <main class="container py-4">
    <h3 class="section-title">Daily Sales Report</h3>
    <div id="reportArea" class="card p-3"></div>
  </main>

  <script src="assets/js/script.js"></script>
  <script>
    function renderReport(){
      const orders = JSON.parse(localStorage.getItem('snapEats_orders') || '[]');
      const area = document.getElementById('reportArea');
      if(orders.length===0) return area.innerHTML = `<div class="alert alert-info">No sales yet.</div>`;
      // group by date
      const byDate = {};
      orders.forEach(o=>{
        const d = new Date(o.createdAt).toLocaleDateString();
        if(!byDate[d]) byDate[d] = {count:0, revenue:0};
        byDate[d].count++;
        byDate[d].revenue += o.total||0;
      });
      let html = `<table class="table"><thead><tr><th>Date</th><th>Orders</th><th>Revenue (LKR)</th></tr></thead><tbody>`;
      Object.keys(byDate).reverse().forEach(d=>{
        html += `<tr><td>${d}</td><td>${byDate[d].count}</td><td>${byDate[d].revenue}</td></tr>`;
      });
      html += `</tbody></table>`;
      area.innerHTML = html;
    }
    document.addEventListener('DOMContentLoaded', renderReport);
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
