<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Cart â€” SnapEats</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/css/styles.css" rel="stylesheet">
</head>
<body>
  <nav class="navbar navbar-expand-lg px-4">
    <a class="navbar-brand" href="index.html">SnapEats</a>
  </nav>

  <main class="container py-4">
    <h3 class="section-title">Your Cart</h3>
    <div id="cart-area"></div>
  </main>

  <script src="assets/js/script.js"></script>
  <script>
    function renderCart(){
      const cart = loadCart();
      const area = document.querySelector('#cart-area');
      if(cart.length===0){
        area.innerHTML = `<div class="card p-4 text-center"><p class="mb-0">Your cart is empty. <a href="menu.html">Shop now</a></p></div>`;
        return;
      }
      let html = `<div class="row"><div class="col-md-8"><div class="list-group">`;
      cart.forEach(it=>{
        html += `<div class="list-group-item d-flex align-items-center justify-content-between">
          <div class="d-flex align-items-center gap-3">
            <img src="${it.img}" width="80" height="60" style="object-fit:cover;border-radius:8px">
            <div>
              <div class="fw-bold">${it.name}</div>
              <small class="text-muted">LKR ${it.price}</small>
            </div>
          </div>
          <div class="text-end">
            <div class="mb-2">
              <input type="number" min="1" value="${it.qty}" onchange="updateQty(${it.id}, this.value)" style="width:80px" class="form-control form-control-sm d-inline-block">
            </div>
            <div>
              <button class="btn btn-sm btn-outline-danger" onclick="removeFromCart(${it.id}); renderCart();">Remove</button>
            </div>
          </div>
        </div>`;
      });
      html += `</div></div><div class="col-md-4"><div class="card p-3">
        <h5>Order Summary</h5>`;
      const t = cartTotals();
      html += `<p class="mb-1"><small>Subtotal</small><br><strong>LKR ${t.subtotal}</strong></p>`;
      html += `<p class="mb-1"><small>Tax (8%)</small><br><strong>LKR ${t.tax}</strong></p>`;
      html += `<hr><h5>Total: LKR ${t.total}</h5>`;
      html += `<div class="d-grid"><a href="confirm.html" class="btn btn-success">Proceed to Confirm</a></div>`;
      html += `<div class="mt-2 text-center"><button class="btn btn-link text-danger" onclick="clearCart(); renderCart();">Clear Cart</button></div>`;
      html += `</div></div></div>`;
      area.innerHTML = html;
    }

    document.addEventListener('DOMContentLoaded', ()=> renderCart());
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
